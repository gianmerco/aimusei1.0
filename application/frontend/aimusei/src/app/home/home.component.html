<div class="container my-3">
    <h3>ACQUISTO GUIDATO</h3>
    <form [formGroup]="form" class="bg-light px-3 py-4">
        <div class="row mx-0 mt-0 mb-3">    
            <div class="col-12 p-0 d-flex align-items-center">
                <div class="form-group p-0 m-0" style="width: 100%;">
                    <label for="title" [ngClass]="{'active' : form.get('title')?.value?.length>0}">
                        Museo
                    </label>
                    <input formControlName="title" class="form-control" id="title">
                </div>
                <div class="btn btn-primary rounded px-4 h-100 ms-2 d-flex align-items-center"
                style="min-width: fit-content; border-radius: 0;"
                (click)="getDescrizione(form.get('title')?.value)" 
                [ngClass]="{'disabled': !form.get('title')?.value || form.get('title')?.value.length==0}">
                    Ottieni descrizione
                </div>
            </div>
        </div>
        <div class="form-group m-0 p-0">
            <label for="input" class="active">
                Descrizione Museo
            </label>
            <div style="background-color: white;" class="pos-relative">
                <textarea class="form-control" id="input" rows="10" style="opacity: 0;" readonly></textarea>
                <div class="pos-absolute form-control custom-scroll" id="test"
                style="top: 0; left: 0; height: 100%; overflow-y: auto;">
                    {{form.get('input')?.value}}
                </div>
            </div>
        </div>
        <div *ngIf="selectedTypes.length>0">
            <div class="accordion mt-3" id="accordionExample">
                <div class="accordion-item" *ngFor="let t of selectedTypes; let i=index">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed text-decoration-none" type="button"
                        data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse_'+i"
                        aria-expanded="false" [attr.aria-controls]="'collapse_'+i">
                            {{t.label}}
                        </button>
                    </h2>
                    <div [id]="'collapse_'+i" class="accordion-collapse collapse bg-white p-3"
                    data-bs-parent="#accordionExample">
                        <div class="accordion-body py-0">
                            <div class="custom-scroll py-3">
                                {{form.get(selectedTypes[0].key)?.value}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="form-group select-wrapper mt-3 mb-0">
            <select id="defaultSelect" class="form-control" formControlName="selectedType"
                [ngClass]="{'disabled' : !form.get('input')?.value || form.get('input')?.value.length==0}">
                <option [selected]="null" [value]="null">
                    Selezionare la tipologia di supporto necessario
                </option>
                <option *ngFor="let t of types" [value]="t.key">
                    {{t.label}}
                </option>
            </select>
        </div>
        <div class="mt-3" *ngIf="selectedTypes.length>0">
            <div class="accordion-body py-0">
                <div class="custom-scroll py-3">
                    {{form.get(selectedTypes[0].key)?.value}}
                </div>
            </div>
        </div> -->


        <div class="descr-container row m-0 py-4 px-3 pos-relative" *ngIf="false">
            <div class="form-group col-6 m-0 p-0">
                <label for="input"  class="active">
                    Descrizione
                </label>
                <div style="background-color: white;" class="pos-relative">
                    <textarea class="form-control" id="input" rows="10" style="opacity: 0;" readonly></textarea>
                    <div class="pos-absolute form-control custom-scroll" id="test"
                    style="top: 0; left: 0; height: 100%; overflow-y: auto;">
                        {{selectedTypes.length>0 ? form.get(selectedTypes[0].key)?.value :
                        form.get('input')?.value}}
                    </div>
                </div>
            </div>
            <div class="col-6 d-flex justify-content-center">
                <div class="d-flex align-items-start flex-column">
                    <label class="p-0">Selezionare la tipologia di supporto necessario</label>
                    <div class="custom-checkbox form-check mt-3" *ngFor="let t of types">
                        <input [id]="'checkbox_'+t.key" type="checkbox" [formControlName]="'checkbox_'+t.key"
                        (ngModelChange)="checkType($event,t)">
                        <label [for]="'checkbox_'+t.key">{{t.label}}</label>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>