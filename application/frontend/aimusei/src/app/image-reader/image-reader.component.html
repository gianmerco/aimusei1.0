<div class="container my-3">
    <h3>TITOLO PAGINA</h3>
    <form [formGroup]="form" class="bg-light px-3 py-4">
        <div class="row mx-0 mt-0 pos-relative">
            <div class="col-6 m-0 p-0" style="max-width: calc(50% - 1.5rem);">
                <label>
                    Immagine
                </label>
                <div class="image-container">
                    <img alt="Immagine" [src]="form.get('image')?.value ? form.get('image')?.value : ''"/>
                </div>
            </div>

            <div class="form-group select-wrapper mt-3 mb-0" *ngIf="false">
                <select id="defaultSelect" class="form-control" formControlName="selectedType">
                    <option [selected]="null" [value]="null">
                        Selezionare la tipologia di supporto necessario
                    </option>
                    <option *ngFor="let t of types" [value]="t.key">
                        {{t.label}}
                    </option>
                </select>
            </div>
            <div class="my-4" *ngIf="false && checkAccordion()">
                <div *ngIf="form.get('pittogramma')?.value?.length>0">
                    <div class="accordion-body custom-scroll" style="max-height: none;">
                        <img alt="Pittogramma" [src]="form.get('pittogramma')?.value ? form.get('pittogramma')?.value : ''"/>
                    </div>
                </div>
                <div *ngIf="form.get('desc')?.value?.length>0">
                    <div class="accordion-body custom-scroll">
                        {{form.get('desc')?.value}}
                    </div>
                </div>
                <div *ngFor="let t of results; let i=index">
                    <div class="accordion-body custom-scroll">
                        {{form.get(t.key)?.value}}
                    </div>
                </div>
            </div>


            <div class="col-12 d-flex justify-content-center" *ngIf="false">
                <div class="d-flex align-items-start flex-column justify-content-center">
                    <label class="p-0">Selezionare la tipologia di supporto necessario</label>
                    <div class="custom-checkbox form-check mt-3" *ngFor="let t of types">
                        <input [id]="'checkbox_'+t.key" type="checkbox" [formControlName]="'checkbox_'+t.key"
                        (ngModelChange)="checkType($event,t)">
                        <label [for]="'checkbox_'+t.key">{{t.label}}</label>
                    </div>
                </div>
            </div>
            <div class="pos-absolute d-flex justify-content-end p-0" style="bottom: 0; right: 0;" *ngIf="false">
                <div class="button-elabora px-4 py-3"
                style="border-top-right-radius: 20px;"
                (click)="elaboraPittogramma()" [ngClass]="{'disabled': form.invalid}">
                    Ottieni pittogramma
                </div>
                <div class="button-elabora px-4 py-3 ms-2"
                (click)="elabora()" [ngClass]="{'disabled': form.invalid}">
                    Ottieni descrizione
                </div>
            </div>
        </div>
        <!-- <div class="my-5 d-flex justify-content-center align-items-center">
            <button class="btn btn-primary" (click)="elabora()" [disabled]="checkTrad()">
                Elabora
            </button>
        </div> -->
        <div class="d-flex justify-content-center mt-3">
            <button class="btn btn-primary" (click)="elaboraAll()">
                ELABORA IMMAGINE
            </button>
        </div>

        <div *ngIf="selectedTypes.length>0">
            <div class="accordion mt-3" id="accordionExample">
                <div class="accordion-item" *ngFor="let t of selectedTypes; let i=index">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button"
                        data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse_'+i"
                        aria-expanded="false" [attr.aria-controls]="'collapse_'+i">
                            {{t.label}}
                        </button>
                    </h2>
                    <div [id]="'collapse_'+i" class="accordion-collapse collapse bg-white p-3"
                    data-bs-parent="#accordionExample">
                        <div class="accordion-body py-0" *ngIf="t.key!='PITTOGRAMMA'">
                            <div class="custom-scroll py-3">
                                {{form.get(selectedTypes[0].key)?.value}}
                            </div>
                        </div>
                        <div class="accordion-body custom-scroll" style="max-height: none;" *ngIf="t.key=='PITTOGRAMMA'">
                            <img alt="Pittogramma" [src]="form.get('pittogramma')?.value ? form.get('pittogramma')?.value : ''"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <div class="accordion my-4" *ngIf="false && checkAccordion()">
            <div class="accordion-item" *ngIf="form.get('pittogramma')?.value?.length>0">
                <h2 class="accordion-header" [id]="'headingPittogramma'">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    [attr.data-bs-target]="'#collapsePittogramma'" aria-expanded="false" 
                    [attr.aria-controls]="'collapsePittogramma'">
                        {{'Pittogramma' | lowercase}}
                    </button>
                </h2>
                <div [id]="'collapsePittogramma'" class="accordion-collapse collapse"
                [attr.aria-labelledby]="'headingPittogramma'">
                    <div class="accordion-body custom-scroll" style="max-height: none;">
                        <img alt="Pittogramma" [src]="form.get('pittogramma')?.value ? form.get('pittogramma')?.value : ''"/>
                    </div>
                </div>
            </div>
            <div class="accordion-item" *ngIf="form.get('desc')?.value?.length>0">
                <h2 class="accordion-header" [id]="'headingDesc'">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    [attr.data-bs-target]="'#collapseDesc'" aria-expanded="false" 
                    [attr.aria-controls]="'collapseDesc'">
                        {{'Descrizione' | lowercase}}
                    </button>
                </h2>
                <div [id]="'collapseDesc'" class="accordion-collapse collapse"
                [attr.aria-labelledby]="'headingDesc'">
                    <div class="accordion-body custom-scroll">
                        {{form.get('desc')?.value}}
                    </div>
                </div>
            </div>
            <div class="accordion-item" *ngFor="let t of results; let i=index">
                <h2 class="accordion-header" [id]="'heading'+i">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                    [attr.data-bs-target]="'#collapse'+i" aria-expanded="false" 
                    [attr.aria-controls]="'collapse'+i">
                        {{t.key | lowercase}}
                    </button>
                </h2>
                <div [id]="'collapse'+i" class="accordion-collapse collapse"
                [attr.aria-labelledby]="'heading'+i">
                    <div class="accordion-body custom-scroll">
                        {{form.get(t.key)?.value}}
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>